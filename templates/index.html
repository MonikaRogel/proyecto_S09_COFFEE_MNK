{% extends "base.html" %}

{% block content %}
  <section class="hero">
    <div class="hero-content">
      <h1>Sistema de ventas para cafetería</h1>
      <p>
        Consulta productos del menú, registra pedidos y controla inventario de forma rápida.
      </p>

      <div class="hero-actions">
        <a class="btn primary" href="{{ url_for('productos.index') }}">Ver menú</a>
        <a class="btn" href="{{ url_for('pedidos.nuevo') }}">Registrar pedido</a>
      </div>

      <div class="hero-badges">
        <span class="pill">Productos</span>
        <span class="pill">Pedidos</span>
        <span class="pill">Inventario</span>
      </div>
    </div>
  </section>

  <section class="section">
    <div class="section-head">
      <h2>Destacados</h2>
      <a class="btn primary" href="{{ url_for('productos.index') }}">Ver menú</a>
    </div>

    <div class="cards">
      {% for slug in destacados %}
        {% set p = menu[slug] %}
        <article class="card">
          <div class="card-media" style="background-image:url('{{ p.img }}');"></div>

          <div class="card-body">
            <div class="card-title-row">
              <h3>{{ p.nombre }}</h3>
              <span class="price">${{ "%.2f"|format(p.precio) }}</span>
            </div>

            <p class="muted">{{ p.desc }}</p>

            <div class="card-meta">
              {% if p.stock > 0 %}
                <span class="badge ok">Stock: {{ p.stock }}</span>
              {% else %}
                <span class="badge warn">Agotado</span>
              {% endif %}
            </div>

            <div class="card-actions">
              <a class="btn small" href="{{ url_for('productos.detalle', slug=slug) }}">Ver detalle</a>

              {% if p.stock > 0 %}
                <a class="btn small primary" href="{{ url_for('pedidos.nuevo', producto=slug) }}">Pedir</a>
              {% else %}
                <span class="btn small disabled">No disponible</span>
              {% endif %}
            </div>
          </div>
        </article>
      {% endfor %}
    </div>
  </section>
{% endblock %}