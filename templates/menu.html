{% extends "base.html" %}

{% block content %}
  <div class="page-head">
    <h1>Men√∫</h1>
    <p class="muted">Productos disponibles con precio y stock actualizado.</p>
  </div>

  <div class="cards">
    {% for slug, p in menu.items() %}
      <article class="card">
        <div class="card-media" style="background-image:url('{{ p.img }}');"></div>

        <div class="card-body">
          <div class="card-title-row">
            <h3>{{ p.nombre }}</h3>
            <span class="price">${{ "%.2f"|format(p.precio) }}</span>
          </div>

          <p class="muted">{{ p.desc }}</p>

          <div class="card-meta">
            {% if p.stock > 0 %}
              <span class="badge ok">Stock: {{ p.stock }}</span>
            {% else %}
              <span class="badge warn">Agotado</span>
            {% endif %}
          </div>

          <div class="card-actions">
            <a class="btn small" href="{{ url_for('productos.detalle', slug=slug) }}">Ver detalle</a>

            {% if p.stock > 0 %}
              <a class="btn small primary" href="{{ url_for('pedidos.nuevo', producto=slug) }}">Pedir</a>
            {% else %}
              <span class="btn small disabled">No disponible</span>
            {% endif %}
          </div>
        </div>
      </article>
    {% endfor %}
  </div>
{% endblock %}